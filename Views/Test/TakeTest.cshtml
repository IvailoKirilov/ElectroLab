@model ElectroLab.Models.Test

@{
    ViewData["Title"] = "Take Test";
}

<h2>@Model.Title</h2>
<form asp-action="SubmitTest" method="post">
    <input type="hidden" name="testId" value="@Model.Id" />

    @foreach (var question in Model.Questions)
    {
        <div class="card mb-3">
            <div class="card-header">
                <strong>@question.Text</strong>
            </div>
            <div class="card-body">
                @for (int i = 0; i < question.Options.Count(); i++)
                {
                    <div class="form-check">
                        <!-- Bind to SubmissionAnswer collection using the correct question index -->
                        <input class="form-check-input"
                               type="radio"
                               name="submissionAnswers[@question.Id].Answer"
                               value="@question.Options.ElementAt(i)"
                               id="option@question.Id-@i" />
                        <label class="form-check-label"
                               for="option@question.Id-@i">
                            @question.Options.ElementAt(i)
                        </label>
                    </div>
                }
            </div>
        </div>
    }

    <button type="submit" class="btn btn-primary">Submit Test</button>
</form>
